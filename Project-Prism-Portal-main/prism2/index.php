<?php
include("includes/header.php");
include("includes/navbar.php");
include("includes/form.php");
include("config.php");
?>

<!-- ***** Main Banner Area Start ***** -->
<div class="main-banner">
  <div class="container">
    <div class="row">
      <div class="col-lg-10 offset-lg-1">
        <div class="header-text">
          <h2>Unleash your <em>Potential</em> , <em> Creativity</em> &amp; <em>Inspire Others</em></h2>
          <p>Show your innovative ideas, Showcase your Creativity, and get discovered on our Aptech Project Prism!</p>
          <div class="buttons">
            <div class="big-border-button">
              <a href="./User-Dashboard/add_project.php">Add Project <i class="fa-solid fa-arrow-right"></i></a>
            </div>
            <div class=" big-border-button">
              <a href="./User-Dashboard/add_project.php"><i class="fa-solid fa-circle-plus"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ***** Main Banner Area End ***** -->

<!-- <section class="featured-items" id="featured-items">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="owl-features owl-carousel" style="position: relative; z-index: 5;">
          <div class="item">
            <div class="thumb">
              <img src="assets/images/featured-01.jpg" alt="">
              <div class="hover-effect">
                <div class="content">
                  <h4>Walk In The Nature <i class="fa fa-star"></i><i class="fa fa-star"></i><i
                      class="fa fa-star"></i><i class="fa fa-star"></i> <span>(4.5)</span></h4>
                  <ul>
                    <li><span>Contest Winner:</span> Vincent Adam</li>
                    <li><span>Contest Author:</span> Anthony Soft</li>
                    <li><span>Awards:</span> $1.000 + Camera Nikon</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="item">
            <div class="thumb">
              <img src="assets/images/featured-02.jpg" alt="">
              <div class="hover-effect">
                <div class="content">
                  <h4>Smile In The Nature <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>
                    <span>(4.5)</span>
                  </h4>
                  <ul>
                    <li><span>Contest Winner:</span> Thomas Eddy</li>
                    <li><span>Contest Author:</span> Anthony Soft</li>
                    <li><span>Awards:</span> $1,200 + Canon EOS R7</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="item">
            <div class="thumb">
              <img src="assets/images/featured-03.jpg" alt="">
              <div class="hover-effect">
                <div class="content">
                  <h4>Happy In The Nature <i class="fa fa-star"></i><i class="fa fa-star"></i><i
                      class="fa fa-star"></i><i class="fa fa-star"></i> <span>(4.5)</span></h4>
                  <ul>
                    <li><span>Contest Winner:</span> Vincent Adam</li>
                    <li><span>Contest Author:</span> Anthony Soft</li>
                    <li><span>Awards:</span> $1,800 + Canon EOS R6</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="item">
            <div class="thumb">
              <img src="assets/images/featured-01.jpg" alt="">
              <div class="hover-effect">
                <div class="content">
                  <h4>Walk In The Nature <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>
                    <span>(4.5)</span>
                  </h4>
                  <ul>
                    <li><span>Contest Winner:</span> Thomas Eddy</li>
                    <li><span>Contest Author:</span> Anthony Soft</li>
                    <li><span>Awards:</span> $8,400 + Canon EOS R1</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="item">
            <div class="thumb">
              <img src="assets/images/featured-02.jpg" alt="">
              <div class="hover-effect">
                <div class="content">
                  <h4>Run In The Nature <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i
                      class="fa fa-star"></i> <span>(4.5)</span></h4>
                  <ul>
                    <li><span>Contest Winner:</span> Vincent Adam</li>
                    <li><span>Contest Author:</span> Anthony Soft</li>
                    <li><span>Awards:</span> $5,500 + Canon EOS R3</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="item">
            <div class="thumb">
              <img src="assets/images/featured-03.jpg" alt="">
              <div class="hover-effect">
                <div class="content">
                  <h4>Stay In The Nature <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>
                    <span>(4.5)</span>
                  </h4>
                  <ul>
                    <li><span>Contest Winner:</span> Thomas Eddy</li>
                    <li><span>Contest Author:</span> Anthony Soft</li>
                    <li><span>Awards:</span> $4,400 + Canon EOS R5</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="item">
            <div class="thumb">
              <img src="assets/images/featured-01.jpg" alt="">
              <div class="hover-effect">
                <div class="content">
                  <h4>Walk In The Nature <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>
                    <span>(4.5)</span>
                  </h4>
                  <ul>
                    <li><span>Contest Winner:</span> Vincent Adam</li>
                    <li><span>Contest Author:</span> Anthony Soft</li>
                    <li><span>Awards:</span> $3,800 + Canon EOS R6</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="item">
            <div class="thumb">
              <img src="assets/images/featured-02.jpg" alt="">
              <div class="hover-effect">
                <div class="content">
                  <h4>Shoot In The Nature <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>
                    <span>(4.5)</span>
                  </h4>
                  <ul>
                    <li><span>Contest Winner:</span> Vincent Adam</li>
                    <li><span>Contest Author:</span> Anthony Soft</li>
                    <li><span>Awards:</span> $2,400 + Canon EOS R7</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="item">
            <div class="thumb">
              <img src="assets/images/featured-03.jpg" alt="">
              <div class="hover-effect">
                <div class="content">
                  <h4>Fly In The Nature <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>
                    <span>(4.5)</span>
                  </h4>
                  <ul>
                    <li><span>Contest Winner:</span> Vincent Adam</li>
                    <li><span>Contest Author:</span> Anthony Soft</li>
                    <li><span>Awards:</span> $1,200 + Canon EOS R10</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section> -->


<section class="popular-categories">
  <div class="container-fluid">
    <div class="row">
      <!-- <div class="col-lg-6">
        <div class="section-heading">
          <h4>Check Out <em>Popular</em> <em>Categories</em></h4>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="main-button">
          <a href="categories.php">Discover All Categories</a>
        </div>
      </div> -->
      <?php
      $fetch_cat = "
                                  SELECT pc.c_id, pc.c_name, pc.c_img, COUNT(p.project_id) AS project_count
                                  FROM project_category pc
                                  LEFT JOIN project p ON pc.c_id = p.category
                                  GROUP BY pc.c_id, pc.c_name, pc.c_img LIMIT 4";
      $fetch_result = mysqli_query($connection, $fetch_cat);
      if (mysqli_num_rows($fetch_result) > 0) {
        while ($row = mysqli_fetch_assoc($fetch_result)) {
          ?>
          <div class="col-lg-3 col-sm-6 mt-5">
            <div class="popular-item">
              <div class="top-content">
                <!-- <div class="icon">
                            
                        </div> -->
                <div class="right">
                  <h4><?php echo $row['c_name'] ?></h4>
                  <span>Projects: <?php echo ($row["project_count"]); ?></span>
                </div>
              </div>
              <div class="thumb">
                <img src="<?php echo './Dashboard/assets/images/category_img/' . $row["c_img"]; ?>" alt="category img">
                <span class="category">Top Contest</span>
                <span class="likes"><i class="fa fa-heart"></i> 256</span>
              </div>
              <div class="border-button">
                <a href="categories.php">Browse More Categories</a>
              </div>
            </div>
          </div>
          <?php
        }
      }
      ?>

    </div>
  </div>
</section>
<section class="pricing-plans">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="section-heading text-center">
          <h4><em>Nominated</em> <em>Projects</em></h4>
        </div>
      </div>
      <?php
     $fetch_project = "
     SELECT p.*, c.c_name, COUNT(l.like_id) AS total_likes
     FROM `project` p
     INNER JOIN `project_category` c ON p.category = c.c_id
     LEFT JOIN `like` l ON p.project_id = l.project_id
     WHERE p.status = 1
     GROUP BY p.project_id
     ORDER BY total_likes DESC
     LIMIT 3
   ";
   
    
      $fetch_result = mysqli_query($connection, $fetch_project);

      // Check if any projects are returned
      if (mysqli_num_rows($fetch_result) > 0) {
        while ($row = mysqli_fetch_assoc($fetch_result)) {
          ?>
          <div class="col-lg-4">
            <div class="thumb">
              <img src="<?php echo './User-Dashboard/assets/images/project_img/' . $row["project_img"]; ?>"
                alt="project img">
              <div class="hover-effect">
                <div class="content">
                  <h4><?php echo $row['project_name'] ?></h4>
                  <span>Technology : <?php echo $row['c_name'] ?></span>
                  <span>Faculty : <?php echo $row['project_faculty'] ?></span>
                  <ul>
                    <li><a href="view_project.php?p-id=<?php echo $row["project_id"] ?>"><i class="fa fa-link"></i></a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <?php
        }
      } else {
        // Display message if no projects are found
        echo "<div class='col-lg-12 text-center'><p>No more projects</p></div>";
      }
      ?>
    </div>
  </div>

  <!-- CSS for Animations and Hover Effects -->
  <style>
    /* Fade-in effect for section content */
    .pricing-plans {
      animation: fadeIn 1s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Scale effect on hover */
    .pricing-plans .thumb {
      position: relative;
      overflow: hidden;
      transition: transform 0.3s ease-in-out;
    }

    .pricing-plans .thumb:hover {
      transform: scale(1.05);
    }

    /* Fade effect on hover */
    .pricing-plans .thumb img {
      width: 100%;
      height: auto;
      transition: opacity 0.3s ease-in-out;
    }

    .pricing-plans .thumb:hover img {
      opacity: 0.7;
    }

    /* Hover effect overlay */
    .pricing-plans .hover-effect {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      color: #fff;
      opacity: 0;
      transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      transform: translateY(20px);
    }

    .pricing-plans .thumb:hover .hover-effect {
      opacity: 1;
      transform: translateY(0);
    }

    /* Content styling */
    .pricing-plans .content h4 {
      margin-bottom: 10px;
      font-size: 18px;
      font-weight: bold;
      animation: fadeInUp 0.5s ease-in-out;
    }

    .pricing-plans .content span {
      display: block;
      margin-bottom: 5px;
      animation: fadeInUp 0.7s ease-in-out;
    }

    .pricing-plans .content ul {
      list-style: none;
      padding: 0;
    }

    .pricing-plans .content ul li {
      display: inline-block;
      margin-right: 10px;
    }

    /* Keyframes for fadeInUp animation */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</section>


<section class="pricing-plans">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="section-heading text-center">
          <h6>Our Projects</h6>
          <h4>All Types of <em>Users' Projects</em> are here</h4>
        </div>
      </div>

      <!-- Search Bar -->
      <div class="col-lg-12 mb-4">
        <div class="search-bar">
          <input type="text" id="searchInput" placeholder="Search by category, project name, or description..."
            class="form-control">
        </div>
      </div>
      
      <p id="noResultsMessage" class="text-center" style="display: none;">No results found</p>


      <!-- Project Listings -->
      <div id="projectContainer" class="row">
        <?php
        $fetch_project = "SELECT * FROM project as p inner join project_category as c on p.category = c.c_id where p.Statuss = 1";
        $fetch_result = mysqli_query($connection, $fetch_project);
        if (mysqli_num_rows($fetch_result) > 0) {
          while ($row = mysqli_fetch_assoc($fetch_result)) {
            ?>

            <div class="col-lg-4 project-item">
              <div class="thumb">
                <img src="<?php echo './User-Dashboard/assets/images/project_img/' . $row["project_img"]; ?>"
                  alt="project img">
                <div class="hover-effect">
                  <div class="content">
                    <h4><?php echo $row['project_name'] ?></h4>
                    <span>Technology : <?php echo $row['c_name'] ?></span>
                    <span>Faculty : <?php echo $row['project_faculty'] ?></span>
                    <ul>
                      <li><a href="view_project.php?p-id=<?php echo $row["project_id"] ?>"><i class="fa fa-link"></i></a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>

            <?php
          }
        }
        ?>

      </div>

      <div class="col-lg-12">
        <div class="main-button">
          <a href="projects.php">Load More Projects</a>
        </div>
      </div>
    </div>
  </div>

  <style>
    .search-bar {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }

    .search-bar .form-control {
      max-width: 600px;
      width: 100%;
    }
  </style>

  <!-- live search bar AJAX -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const searchInput = document.getElementById('searchInput');
      const projectContainer = document.getElementById('projectContainer');
      const noResultsMessage = document.getElementById('noResultsMessage');
      const projects = Array.from(projectContainer.getElementsByClassName('project-item'));

      searchInput.addEventListener('input', function () {
        const query = searchInput.value.toLowerCase();
        let hasResults = false;

        projects.forEach(function (project) {
          const projectName = project.querySelector('h4').textContent.toLowerCase();
          const projectCategory = project.querySelector('span').textContent.toLowerCase();
          const projectDescription = project.querySelector('.project-description') ? project.querySelector('.project-description').textContent.toLowerCase() : '';

          if (projectName.includes(query) || projectCategory.includes(query) || projectDescription.includes(query)) {
            project.style.display = '';
            hasResults = true;
          } else {
            project.style.display = 'none';
          }
        });

        // Show or hide the "No results found" message based on the search results
        if (hasResults) {
          noResultsMessage.style.display = 'none';
        } else {
          noResultsMessage.style.display = 'block';
        }
      });
    });

  </script>


</section>


<?php
include("includes/footer.php");
?>